<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>My CaseLynx Fee Estimator</title>
  <!-- Brand fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cabinet+Grotesk:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root{
      --clx-blue:#2C39DB;
      --clx-sky:#6E80FF;
      --clx-text:#1A1A1A;
      --clx-muted:#555;
      --clx-border:#E6E8F0;
    }
    *{box-sizing:border-box;}
    body{
      font-family:Roboto,system-ui,-apple-system,Segoe UI,Arial,sans-serif;
      margin:0;
      padding:24px 12px;
      background:#fafbff;
      color:var(--clx-text);
    }
    .wrap{
      max-width:720px;
      margin:0 auto;
      background:#fff;
      border-radius:16px;
      border:1px solid var(--clx-border);
      padding:20px 20px 18px;
      box-shadow:0 8px 24px rgba(16,24,40,0.06);
    }
    .brandbar{
      height:5px;
      border-radius:999px;
      background:linear-gradient(90deg,var(--clx-blue),var(--clx-sky));
      margin-bottom:14px;
    }
    h1{
      font-family:"Cabinet Grotesk",Roboto,sans-serif;
      font-size:22px;
      margin:0 0 4px;
    }
    .lead{
      margin:0 0 16px;
      font-size:13px;
      color:var(--clx-muted);
    }
    form{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-bottom:10px;
    }
    label{
      font-size:12px;
      font-weight:600;
      color:#111827;
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    select,
    input{
      padding:9px 10px;
      border-radius:10px;
      border:1px solid var(--clx-border);
      font-size:14px;
      outline:none;
    }
    select:focus,
    input:focus{
      border-color:var(--clx-blue);
      box-shadow:0 0 0 1px rgba(44,57,219,0.04);
    }
    .row{
      display:grid;
      grid-template-columns:1.4fr 1.4fr;
      gap:10px;
    }
    .row-4{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:10px;
    }
    @media (max-width:640px){
      .row,
      .row-4{
        grid-template-columns:1fr;
      }
    }
    .hint{
      font-size:10px;
      font-weight:400;
      color:#9CA3AF;
    }
    .actions{
      margin-top:2px;
    }
    button{
      border:none;
      border-radius:10px;
      padding:9px 13px;
      font-size:13px;
      font-weight:700;
      background:var(--clx-blue);
      color:#fff;
      cursor:pointer;
    }
    button:hover{
      background:#232fba;
    }
    .result{
      display:none;
      margin-top:8px;
      padding:10px;
      border-radius:12px;
      border:1px solid var(--clx-border);
      background:#f9fafb;
      font-size:12px;
    }
    .result-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:4px;
    }
    .result-title{
      font-weight:600;
      color:#111827;
    }
    .total{
      font-weight:800;
      font-size:16px;
      color:var(--clx-blue);
    }
    #breakdown{
      color:var(--clx-muted);
      line-height:1.5;
      font-size:11px;
    }
    .footnote{
      margin-top:8px;
      font-size:10px;
      color:#6B7280;
      line-height:1.5;
    }
    .footer{
      margin-top:6px;
      font-size:10px;
      color:#9CA3AF;
      text-align:right;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brandbar"></div>
    <h1>My CaseLynx Fee Estimator</h1>
    <p class="lead">
      Estimate fees for IME/CME or record review cases based on page count and common add-ons.
    </p>

    <form id="estimator" onsubmit="return false;">
      <div class="row">
        <label>
          Case Type
          <select id="caseType" name="case_type" onchange="recalc()">
            <option value="exam" selected>IME / CME (exam + report)</option>
            <option value="review">Record Review Only (report)</option>
          </select>
        </label>

        <label>
          Estimated # of Record Pages
          <input id="pages" name="pages" type="number" min="1" step="1" placeholder="Enter pages" oninput="recalc()" required>
        </label>
      </div>

      <!-- Add-ons: using your updated rates, all optional -->
      <div class="row-4">
        <label>
          Travel Hours (optional)
          <input id="travelHours" type="number" min="0" step="0.5" value="0" oninput="recalc()">
          <span class="hint">$900/hr</span>
        </label>

        <label>
          Virtual Trial Days (optional)
          <input id="virtualTrialDays" type="number" min="0" step="0.5" value="0" oninput="recalc()">
          <span class="hint">$12,000/day</span>
        </label>

        <label>
          In-Person Trial Days (optional)
          <input id="inPersonTrialDays" type="number" min="0" step="0.5" value="0" oninput="recalc()">
          <span class="hint">$6,000/day</span>
        </label>

        <label>
          Teleconference Calls (optional)
          <input id="teleCalls" type="number" min="0" step="1" value="0" oninput="recalc()">
          <span class="hint">1-hour call @ $1,000</span>
        </label>
      </div>

      <div id="result" class="result">
        <div class="result-header">
          <div class="result-title">Estimated Total</div>
          <div id="total" class="total"></div>
        </div>
        <div id="breakdown"></div>
      </div>

      <div class="actions">
        <button type="button" onclick="recalc()">Calculate</button>
      </div>
    </form>

    <p class="footnote">
      This is a non-binding estimate based on the CaseLynx fee schedule. It includes base fees, page-based review tiers,
      and any selected add-ons (travel, trial appearances, teleconferences). Actual fees may vary based on case specifics
      and additional requests.
    </p>

    <div class="footer">© CaseLynx</div>
  </div>

<script>
  const USD = n => n.toLocaleString(undefined, {
    style: 'currency',
    currency: 'USD',
    maximumFractionDigits: 0
  });

  // Page-based fee calculation with updated Record Review base
  function calcBaseAndPages(pages, type) {
    // UPDATED: record review base from 2,500 to 3,500
    const base = (type === 'review') ? 3500 : 5000;

    const t1 = Math.max(0, Math.min(pages, 1000) - 600) * 5;
    const t2 = Math.max(0, Math.min(pages, 5000) - 1000) * 3;
    const t3 = Math.max(0, pages - 5000) * 1;

    const subtotal = base + t1 + t2 + t3;
    return { base, t1, t2, t3, subtotal };
  }

  function recalc() {
    const p = parseInt(document.getElementById('pages').value, 10);
    const type = document.getElementById('caseType').value;
    const resultBox = document.getElementById('result');

    if (!p || p < 1) {
      resultBox.style.display = 'none';
      return;
    }

    // Add-ons (with your updated rates)
    const travelHours = parseFloat(document.getElementById('travelHours').value) || 0;
    const virtualTrialDays = parseFloat(document.getElementById('virtualTrialDays').value) || 0;
    const inPersonTrialDays = parseFloat(document.getElementById('inPersonTrialDays').value) || 0;
    const teleCalls = parseInt(document.getElementById('teleCalls').value, 10) || 0;

    const TRAVEL_RATE = 900;        // per hour
    const VIRTUAL_TRIAL_RATE = 12000; // per day
    const INPERSON_TRIAL_RATE = 6000; // per day
    const TELECONF_RATE = 1000;     // per 1-hour call

    const { base, t1, t2, t3, subtotal } = calcBaseAndPages(p, type);

    const travelFee = travelHours * TRAVEL_RATE;
    const virtualTrialFee = virtualTrialDays * VIRTUAL_TRIAL_RATE;
    const inPersonTrialFee = inPersonTrialDays * INPERSON_TRIAL_RATE;
    const teleFee = teleCalls * TELECONF_RATE;

    const total = subtotal + travelFee + virtualTrialFee + inPersonTrialFee + teleFee;

    document.getElementById('total').textContent = USD(total);

    const parts = [
      "Base (" + (type === 'review'
        ? "Record Review Only (up to 600 pages)"
        : "IME / CME (exam + report, up to 600 pages)") + "): " + USD(base),
      (t1 ? "$5/page for pages 601–" + Math.min(p, 1000) + ": " + USD(t1) : null),
      (t2 ? "$3/page for pages 1,001–" + Math.min(p, 5000) + ": " + USD(t2) : null),
      (t3 ? "$1/page for pages 5,001–" + p + ": " + USD(t3) : null),
      (travelFee ? "Travel (" + travelHours + " hr @ $900/hr): " + USD(travelFee) : null),
      (virtualTrialFee ? "Virtual trial appearance (" + virtualTrialDays + " day(s) @ $12,000/day): " + USD(virtualTrialFee) : null),
      (inPersonTrialFee ? "In-person trial appearance (" + inPersonTrialDays + " day(s) @ $6,000/day): " + USD(inPersonTrialFee) : null),
      (teleFee ? "Teleconference (" + teleCalls + " × 1-hour call @ $1,000): " + USD(teleFee) : null)
    ].filter(Boolean);

    document.getElementById('breakdown').innerHTML =
      parts.map(x => "• " + x).join("<br>");

    resultBox.style.display = 'block';
  }
</script>
</body>
</html>
