<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MyCaseLynx Fee Estimator</title>
  <link href="https://fonts.googleapis.com/css2?family=Cabinet+Grotesk:wght@600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root{
      --clx-blue:#2C39DB; --clx-sky:#6E80FF; --clx-text:#1A1A1A;
      --clx-muted:#616161; --clx-border:#E6E8F0; --clx-bg:#fafbff; --clx-chip:#eef2ff;
    }
    *{box-sizing:border-box}
    body{font-family:Roboto,system-ui,-apple-system,Segoe UI,Arial,sans-serif;margin:0;color:var(--clx-text);background:var(--clx-bg)}
    .wrap{max-width:760px;margin:32px auto;padding:24px;background:#fff;border:1px solid var(--clx-border);border-radius:16px;box-shadow:0 6px 24px rgba(44,57,219,.06)}
    .brandbar{height:6px;background:linear-gradient(90deg,var(--clx-blue),var(--clx-sky));border-radius:6px;margin:0 0 16px}
    h1{font-family:"Cabinet Grotesk",Roboto,sans-serif;margin:0 0 4px;font-size:24px;line-height:1.2;font-weight:700}
    p.lead{margin:4px 0 16px;color:var(--clx-muted)}
    form{display:grid;gap:12px;margin-top:8px}
    label{font-weight:600;font-size:14px}
    input,select{width:100%;padding:12px;border:1px solid var(--clx-border);border-radius:10px;font-size:16px;background:#fff}
    .row{display:grid;gap:12px;grid-template-columns:1fr 1fr}
    @media (max-width:640px){.row{grid-template-columns:1fr}}

    details{border:1px solid var(--clx-border);border-radius:12px;background:#fff;overflow:hidden}
    summary{list-style:none;cursor:pointer;padding:14px 16px;display:flex;gap:8px;align-items:center;font-family:"Cabinet Grotesk",Roboto,sans-serif;font-weight:700;background:#fff}
    summary::-webkit-details-marker{display:none}
    .caret{width:10px;height:10px;border-right:2px solid #7a7a7a;border-bottom:2px solid #7a7a7a;transform:rotate(-45deg);transition:.2s}
    details[open] .caret{transform:rotate(45deg)}
    .panel{padding:14px 16px;border-top:1px solid var(--clx-border);display:grid;gap:12px}
    .badge{background:var(--clx-chip);color:#3730a3;font-weight:700;border-radius:999px;padding:2px 8px;font-size:11px}
    .hint{color:var(--clx-muted);font-size:12px;margin-top:4px}

    .optional-note{
      display:flex; align-items:center;
      margin:6px 2px 0 2px; padding:10px 12px;
      background:#f5f7ff; border:1px solid var(--clx-border); border-radius:10px;
      font-size:15px; font-weight:700; color:#2a2a2a;
    }

    .result{display:none;border:1px solid var(--clx-border);border-radius:12px;padding:0;background:#fcfdff}
    .result .top{display:flex;justify-content:space-between;align-items:center;padding:12px 14px}
    .total{font-weight:800;font-size:20px}
    .bd{border-top:1px solid var(--clx-border);padding:10px 14px}
    .lines{display:grid;gap:6px}
    .line{display:grid;grid-template-columns:1fr auto;gap:12px;font-size:14px;color:#374151}
    .amount{font-variant-numeric:tabular-nums;font-weight:700}
    .actions{display:flex;gap:8px;margin-top:4px}
    button{padding:12px 14px;border:none;border-radius:10px;cursor:pointer;font-weight:700;font-size:14px;background:var(--clx-blue);color:#fff}
    .btn-ghost{background:#eef2ff;color:#1f2aeb}
    .footnote{margin-top:10px;font-size:12.5px;color:#676767;line-height:1.5}
    .footer{margin-top:14px;color:#6b7280;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brandbar"></div>
    <h1>MyCaseLynx Fee Estimator</h1>
    <p class="lead">Generate an estimated fee for expert work.</p>

    <form id="estimator" onsubmit="return false;">

      <!-- Core Case -->
      <details open>
        <summary><span class="caret"></span>Core Case</summary>
        <div class="panel">
          <div class="row">
            <label>Case Type
              <select id="caseType" onchange="recalc()">
                <option value="exam">IME/CME (exam + report)</option>
                <option value="review">Record review only</option>
              </select>
            </label>
            <label>Estimated # Record Pages
              <input id="pages" type="number" min="1" step="1" placeholder="Enter pages" oninput="recalc()" />
            </label>
          </div>
          <div class="hint">
            Base: $5,750 (IME/CME) or $3,500 (Record Review), includes up to 600 pages.
            Overage: 600–1,000 @ $6/page; 1,000–5,000 @ $3.75/page; 5,000+ @ $1.25/page.
          </div>
        </div>
      </details>

      <div class="optional-note">The sections below are not required—expand only if they apply.</div>

      <!-- Imaging -->
      <details>
        <summary><span class="caret"></span>Imaging Review <span class="badge">Optional</span></summary>
        <div class="panel">
          <div class="row">
            <label>X-ray / standard (#)
              <input id="xrays" type="number" min="0" step="1" value="0" oninput="recalc()" />
            </label>
            <label>MRI / CT (#)
              <input id="mricts" type="number" min="0" step="1" value="0" oninput="recalc()" />
            </label>
          </div>
          <div class="hint">X-ray: $150/study; MRI/CT: $300/study.</div>
        </div>
      </details>

      <!-- Addendum -->
      <details>
        <summary><span class="caret"></span>Addendum Review & Report <span class="badge">Optional</span></summary>
        <div class="panel">
          <label>Addendum pages
            <input id="addPages" type="number" min="0" step="1" value="0" oninput="recalc()" />
          </label>
          <div class="hint">Includes up to 200 pages; additional pages billed at $6/page.</div>
        </div>
      </details>

      <!-- Teleconference -->
      <details>
        <summary><span class="caret"></span>Teleconference Meetings <span class="badge">Optional</span></summary>
        <div class="panel">
          <label>Teleconference hours
            <input id="teleCount" type="number" min="0" step="0.5" value="0" oninput="recalc()" />
          </label>
          <div class="hint">Billed at $1,000/hour.</div>
        </div>
      </details>

      <!-- Travel -->
      <details>
        <summary><span class="caret"></span>Travel <span class="badge">Optional</span></summary>
        <div class="panel">
          <label>Travel time (hours)
            <input id="travelHrs" type="number" min="0" step="0.25" value="0" oninput="recalc()" />
          </label>
          <div class="hint">Billed at $1,000/hour.</div>
        </div>
      </details>

      <!-- Court-related -->
      <details>
        <summary><span class="caret"></span>Court-Related Services <span class="badge">Optional</span></summary>
        <div class="panel">
          <div class="row">
            <label>Deposition hours
              <input id="depoHrs" type="number" min="0" step="0.5" value="0" oninput="recalc()" />
            </label>
            <label>Preparation hours
              <input id="prepHrs" type="number" min="0" step="0.5" value="0" oninput="recalc()" />
            </label>
          </div>

          <label>Testimony days
            <input id="testimonyDays" type="number" min="0" step="1" value="0" oninput="recalc()" />
          </label>

          <div class="hint">
            Deposition: $3,500 first 2 hours, then $1,000/hour.  
            Preparation: $1,000/hour.  
            Testimony: $14,500/day.
          </div>
        </div>
      </details>

      <!-- Expedite Fee -->
      <details>
        <summary><span class="caret"></span>Expedite Fee <span class="badge">Optional</span></summary>
        <div class="panel">
          <label style="display:flex;align-items:center;gap:8px;">
            <input id="expedite" type="checkbox" onchange="recalc()" style="width:auto;" />
            Expedite requested (services needed within 14 days)
          </label>
          <div class="hint">Adds a flat $1,500 expedite fee.</div>
        </div>
      </details>

      <!-- Result -->
      <div id="result" class="result">
        <div class="top">
          <strong>Estimated Total</strong>
          <div id="total" class="total"></div>
        </div>
        <div class="bd"><div id="lines" class="lines"></div></div>
      </div>

      <div class="actions">
        <button onclick="recalc()">Calculate</button>
        <button type="reset" class="btn-ghost" onclick="setTimeout(recalc,0)">Reset</button>
      </div>
    </form>

    <p class="footnote">This calculator provides a non-binding estimate.</p>
    <div class="footer">© CaseLynx</div>
  </div>

<script>
  const USD = n => (Number.isFinite(n) ? n : 0).toLocaleString(
    undefined,{style:'currency',currency:'USD',maximumFractionDigits:0}
  );

  /* Core Pages */
  function pageOverage(p){
    const t1 = Math.max(0, Math.min(p,1000) - 600) * 6.0;
    const t2 = Math.max(0, Math.min(p,5000) - 1000) * 3.75;
    const t3 = Math.max(0, p - 5000) * 1.25;
    return {t1,t2,t3,total:t1+t2+t3};
  }

  function calcCore(pages,type){
    const base = (type==="review" ? 3500 : 5750);
    const over = pageOverage(pages);
    return {base,over,total:base+over.total};
  }

  function calcImaging(x,m){
    return {xr:x*150, mc:m*300, total:x*150+m*300};
  }

  function calcAddendum(p){
    if(!p) return {flat:0,extra:0,total:0,pages:0};
    const extra = Math.max(0,p-200)*6;
    return {flat:1000,extra,total:1000+extra,pages:p};
  }

  function calcMeetings(h){
    return {hours:h, tele:h*1000, total:h*1000};
  }

  function calcTravel(h){
    const hrs = Math.round(Math.max(0,h||0));
    return {hrs, travel:hrs*1000, total:hrs*1000};
  }

  function calcCourt(depoH,prepH,days){
    const deposition = depoH>0 ? (3500 + Math.max(0,depoH-2)*1000) : 0;
    const prep = prepH*1000;
    const testimony = days*14500;
    return {deposition,prep,testimony,total:deposition+prep+testimony};
  }

  function calcExpedite(checked){
    return {applied:checked, fee:checked?1500:0, total:checked?1500:0};
  }

  function recalc(){
    const pages = parseInt(document.getElementById("pages").value || 0);
    if(!pages){ document.getElementById("result").style.display="none"; return;}

    const type = document.getElementById("caseType").value;

    const core = calcCore(pages,type);
    const img  = calcImaging(
      parseInt(document.getElementById("xrays").value || 0),
      parseInt(document.getElementById("mricts").value || 0)
    );
    const add  = calcAddendum(parseInt(document.getElementById("addPages").value || 0));
    const mtg  = calcMeetings(parseFloat(document.getElementById("teleCount").value || 0));
    const trv  = calcTravel(parseFloat(document.getElementById("travelHrs").value || 0));
    const crt  = calcCourt(
      parseFloat(document.getElementById("depoHrs").value || 0),
      parseFloat(document.getElementById("prepHrs").value || 0),
      parseInt(document.getElementById("testimonyDays").value || 0)
    );
    const xp   = calcExpedite(document.getElementById("expedite").checked);

    const total = core.total + img.total + add.total + mtg.total + trv.total + crt.total + xp.total;

    const lines=[];
    lines.push(["Base — "+(type==="review"?"Record Review":"IME/CME")+" (up to 600 pages)", USD(core.base)]);

    if(core.over.t1) lines.push([`Page overage 601–${Math.min(pages,1000)} @ $6/page`, USD(core.over.t1)]);
    if(core.over.t2) lines.push([`Page overage 1,001–${Math.min(pages,5000)} @ $3.75/page`, USD(core.over.t2)]);
    if(core.over.t3) lines.push([`Page overage 5,001–${pages} @ $1.25/page`, USD(core.over.t3)]);

    if(img.xr) lines.push([`Imaging — X-ray (${document.getElementById("xrays").value})`, USD(img.xr)]);
    if(img.mc) lines.push([`Imaging — MRI/CT (${document.getElementById("mricts").value})`, USD(img.mc)]);

    if(add.total){
      lines.push(["Addendum review & report", USD(add.flat)]);
      if(add.extra) lines.push([`Addendum extra pages (${add.pages-200} @ $6/page)`, USD(add.extra)]);
    }

    if(mtg.total) lines.push([`Teleconference (${mtg.hours} hr[s])`, USD(mtg.total)]);
    if(trv.total) lines.push([`Travel time (${trv.hrs} hr[s])`, USD(trv.total)]);

    if(crt.deposition) lines.push(["Deposition (first 2 hrs incl.)", USD(crt.deposition)]);
    if(crt.prep) lines.push([`Preparation (${document.getElementById("prepHrs").value} hr[s])`, USD(crt.prep)]);
    if(crt.testimony) lines.push([`Court testimony (${document.getElementById("testimonyDays").value} day[s])`, USD(crt.testimony)]);

    if(xp.applied) lines.push(["Expedite fee", USD(xp.fee)]);

    document.getElementById("total").textContent = USD(total);
    document.getElementById("lines").innerHTML =
      lines.map(([l,a])=>`<div class="line"><div>${l}</div><div class="amount">${a}</div></div>`).join("");
    document.getElementById("result").style.display="block";
  }
</script>
</body>
</html>
